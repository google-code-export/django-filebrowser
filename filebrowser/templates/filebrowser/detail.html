{% extends "admin/base_site.html" %}

<!-- LOADING -->
{% load i18n adminmedia fb_tags fb_versions %}

<!-- STYLESHEETS -->
{% block stylesheets %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{{ settings_var.URL_FILEBROWSER_MEDIA }}css/filebrowser.css" />
{% endblock %}

<!-- JAVASCRIPTS -->
{% block javascripts %}
    {{ block.super }}
    {{ media }}
{% endblock %}

<!-- COLTYPE/BODYCLASS -->
{% block bodyclass %}change-form filebrowser{% if query.pop %} popup{% endif %}{% endblock %}
{% block content-class %}content-flexible{% endblock %}

<!-- BREADCRBUMBS -->
{% block breadcrumbs %}{% include "filebrowser/include/breadcrumbs.html" %}{% endblock %}

<!-- CONTENT -->
{% block content %}
<div class="container-flexible">
    <div class="form-container">
        <form action="{% query_string "" "filter_date,filter_type,q,p" %}" method="post">{% csrf_token %}
            {% if form.errors %}<p class="errornote">{% trans 'Please correct the following errors.' %}</p>{% endif %}
            <fieldset class="module">
                <div class="row {% if form.dir_name.errors %}errors{% endif %}">
                    <div class="column span-4"><label class="required" for="id_dir_name">{{ form.name.label }}</label></div>
                    <div class="column span-flexible">
                        {{ form.name }}
                        {% if form.name.errors %}<ul class="errorlist">{{ form.name.errors }}</ul>{% endif %}
                        {% if form.name.help_text %}<p class="help">{{ form.name.help_text|safe }}</p>{% endif %}
                    </div>
                </div>
            </fieldset>
            {% if fileobject.filetype == "Folder" %}
            <fieldset class="module collapse open">
                <h2 class="collapse-handler">{% trans "Folder Information" %}</h2>
                <div class="row">
                    <div class="column span-4"><label>{% trans "Date" %}</label></div>
                    <div class="column span-flexible">
                        <p style="padding: 0 0 6px; font-size: 11px; line-height: 15px; margin: 5px 0 -5px;">
                            {{ fileobject.datetime|date:"N j, Y" }}
                        </p>
                    </div>
                </div>
            </fieldset>
            {% endif %}
            {% if fileobject.filetype != "Folder" %}
            <fieldset class="module collapse open">
                <h2 class="collapse-handler">{% trans "File Information" %}</h2>
                <div class="row">
                    <div class="column span-4"><label>{% trans "URL" %}</label></div>
                    <div class="column span-flexible">
                        <p style="padding: 0 0 6px; font-size: 11px; line-height: 15px; margin: 5px 0 -5px;">
                            <a href="{{ fileobject.url }}">{{ fileobject.url }}</a>
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="column span-4"><label>{% trans "Filesize" %}</label></div>
                    <div class="column span-flexible">
                        <p style="padding: 0 0 6px; font-size: 11px; line-height: 15px; margin: 5px 0 -5px;">
                            {{ fileobject.filesize|filesizeformat }}
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="column span-4"><label>{% trans "Date" %}</label></div>
                    <div class="column span-flexible">
                        <p style="padding: 0 0 6px; font-size: 11px; line-height: 15px; margin: 5px 0 -5px;">
                            {{ fileobject.datetime|date:"N j, Y" }}
                        </p>
                    </div>
                </div>
                {% if fileobject.filetype == "Image" %}
                <div class="row">
                    <div class="column span-4"><label>{% trans "Size" %}</label></div>
                    <div class="column span-flexible">
                        <p style="padding: 0 0 6px; font-size: 11px; line-height: 15px; margin: 5px 0 -5px;">
                            {{ fileobject.width }} x {{ fileobject.height }} px
                        </p>
                    </div>
                </div>
                {% endif %}
            </fieldset>
            {% endif %}
            {% if fileobject.filetype == "Image" %}
            <fieldset class="module collapse open">
                <h2 class="collapse-handler">{% trans "Image Information" %}</h2>
                <div class="row">
                    <div class="column span-4"><label>{% trans "Thumbnail" %}</label></div>
                    <div class="column span-flexible">
                        <p style="padding: 0 0 6px; font-size: 11px; line-height: 15px; margin: 5px 0 -5px;">
                            <img src="{% version fileobject.path settings_var.ADMIN_THUMBNAIL %}" title="{% trans 'View Image' %}" />
                        </p>
                    </div>
                </div>
                {% if settings_var.ADMIN_VERSIONS %}
                {% for version in settings_var.ADMIN_VERSIONS %}
                {% version_object fileobject.path version as image_version %}
                {% version_setting version %}
                <div class="row">
                    <div class="column span-4"><label>{{ version_setting.verbose_name }}</label></div>
                    <div class="column span-flexible">
                        <p style="padding: 0 0 6px; font-size: 11px; line-height: 15px; margin: 5px 0 -5px;">
                            <img src="{{ image_version.url }}" />
                        </p>
                    </div>
                </div>
                {% endfor %}
                {% endif %}
            </fieldset>
            {% endif %}
            <div class="module footer">
                <ul class="submit-row">
                    <li class="left delete-link-container"><a href="{% url fb_delete_confirm %}{% query_string %}&amp;filetype={{ fileobject.filetype }}" class="delete-link">{% trans "Delete" %}</a></li>
                    <li class="submit-button-container"><input type="submit" value="{% trans 'Save' %}" class="default" /></li>
                    <li class="submit-button-container"><input type="submit" value="{% trans 'Save and continue editing' %}" name="_continue" /></li>
                </ul><br clear="all" />
            </div>
        </form>
    </div>
</div>
{% endblock %}